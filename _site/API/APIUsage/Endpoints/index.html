<h1 id="stac-endpoints">STAC Endpoints</h1>

<p>The base URL of the STAC catalog is https://api.earthdaily.com/platform/v1/stac and below are various endpoints</p>

<ul>
  <li><a href="#collections">Collections</a></li>
  <li><a href="#collection">Collection</a></li>
  <li><a href="#items">Items</a></li>
  <li><a href="#item">Item</a></li>
  <li><a href="#queryables">Queryables</a></li>
  <li><a href="#search">Search</a>
    <ul>
      <li><a href="#basic-search-via-get-method">Basic Search via GET Method</a></li>
      <li><a href="#basic-search-via-post-method">Basic Search via POST Method</a></li>
      <li><a href="#query-extension-via-post-method">Query Extension via POST Method</a></li>
      <li><a href="#fields-extension">Fields Extension</a></li>
      <li><a href="#sortby-extension">Sortby Extension</a></li>
    </ul>
  </li>
  <li><a href="#downloading-assets">Downloading Assets</a></li>
  <li><a href="#cloud-mask-query">Cloud Mask Query</a></li>
</ul>

<h2 id="collections">Collections</h2>
<p>Return list of all Collections</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://api.earthdaily.com/platform/v1/stac/collections
</code></pre></div></div>
<p><strong>Example</strong> : <a href="/API/APIUsage/CommandLine/#collections">Command Line</a> | <a href="/API/APIUsage/Postman/#collections">Postman</a> | <a href="/API/APIUsage/Python/#get-collections">Python</a></p>

<h2 id="collection">Collection</h2>
<p>Return specific Collection</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://api.earthdaily.com/platform/v1/stac/collections/&lt;COLLECTION_ID&gt;
</code></pre></div></div>

<p>This end point takes the collection id as parameter. Below are some examples</p>

<table>
  <thead>
    <tr>
      <th>Collection</th>
      <th>URL</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Sentinel-2 L1C</td>
      <td>https://api.earthdaily.com/platform/v1/stac/collections/sentinel-2-l1c</td>
    </tr>
    <tr>
      <td>Landsat Collection 2 L1</td>
      <td>https://api.earthdaily.com/platform/v1/stac/collections/landsat-c2l1</td>
    </tr>
    <tr>
      <td>Venus L2A</td>
      <td>https://api.earthdaily.com/platform/v1/stac/collections/venus-l2a</td>
    </tr>
  </tbody>
</table>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Response of the above requests is metadat about the collection
</code></pre></div></div>
<p><strong>Example</strong> : <a href="/API/APIUsage/CommandLine/#collection">Command Line</a> | <a href="/API/APIUsage/Postman/#collection">Postman</a> | <a href="/API/APIUsage/Python/#get-a-specific-collection">Python</a></p>

<h2 id="items">Items</h2>
<p>Return paged Items ordered by datetime descending (It doesn’t support search parameters, so often /stac/v1/search is preferred instead)</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://api.earthdaily.com/platform/v1/stac/collections/&lt;COLLECTION_ID&gt;/items
</code></pre></div></div>

<p>This end point takes the collection id as parameter. Below are some examples</p>

<table>
  <thead>
    <tr>
      <th>Collection</th>
      <th>URL</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Sentinel-2</td>
      <td>https://api.earthdaily.com/platform/v1/stac/collections/sentinel-2-l1c/items</td>
    </tr>
    <tr>
      <td>Landsat Collection 2 L1</td>
      <td>https://api.earthdaily.com/platform/v1/stac/collections/landsat-c2l1/items</td>
    </tr>
    <tr>
      <td>Venus L2A</td>
      <td>https://api.earthdaily.com/platform/v1/stac/collections/venus-l2a/items</td>
    </tr>
  </tbody>
</table>

<p>The response also contains a link to the next set of items</p>

<p><img src="/Images/STACAPI/PostmanExamples/LinksToNextItem.png" alt="NextItems" />
<!--Space for examples -->
<strong>Example</strong> : <a href="/API/APIUsage/CommandLine/#items">Command Line</a> | <a href="/API/APIUsage/Postman/#items">Postman</a></p>

<h2 id="item">Item</h2>
<p>Returns a single Item for a given Collection and Item ID</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://api.earthdaily.com/platform/v1/stac/collections/&lt;COLLECTION_ID&gt;/items/&lt;ITEM_ID&gt;
</code></pre></div></div>
<p><strong>Example</strong> : <a href="/API/APIUsage/CommandLine/#item">Command Line</a> | <a href="/API/APIUsage/Postman/#item">Postman</a> | <a href="/API/APIUsage/Python/#specific-item">Python</a></p>

<h2 id="queryables">Queryables</h2>
<p>Returns the queryable names for the STAC API Item Search using Query Extension. which allows you to discover which properties are queryable for all collections, a specific collection, or an intersection of collections.</p>

<p>Below are the two ways to query the “queryable items“ for a given collection</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://api.earthdaily.com/platform/v1/stac/queryables?collections=&lt;COLLECTION_ID&gt;
</code></pre></div></div>
<p>or</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://api.earthdaily.com/platform/v1/stac/collections/{collection_id}/queryables
</code></pre></div></div>

<p>Parameters:
collectionId Matches against Item collectionId values</p>

<p>The queryables endpoint  includes the datatype that must be used.</p>

<p>The queryables endpoint currently doesn’t provide information on supported operations for a given property/datatype. Supplying an unsupported field-value-operation combination will result in an error 400 (Bad Request) being returned. Example: a <code class="language-plaintext highlighter-rouge">contains</code> operation is not supported on a <code class="language-plaintext highlighter-rouge">string</code> queryable.</p>

<ul>
  <li>
    <p>Get queryable properties that apply to all collections: 
<code class="language-plaintext highlighter-rouge">https://api.earthdaily.com/platform/v1/stac/queryables</code></p>
  </li>
  <li>
    <p>Get queryable fields that apply to collection sentinel-2-l2a:
<code class="language-plaintext highlighter-rouge">https://api.earthdaily.com/platform/v1/stac/queryables?collections=sentinel-2-l2a</code></p>
  </li>
  <li>
    <p>Get queryable fields that apply to both collections sentinel-2-l1c and sentinel-2-l2a:
<code class="language-plaintext highlighter-rouge">https://api.earthdaily.com/platform/v1/stac/queryables?collections=sentinel-2-l1c,sentinel-2-l2a</code>
<!-- Space for example -->
<strong>Example</strong> : <a href="/API/APIUsage/CommandLine/#queryables">Command Line</a> | <a href="/API/APIUsage/Postman/#queryables">Postman</a></p>
  </li>
</ul>

<h2 id="search">Search</h2>

<p>Implements STAC basic Item search functionality  + extensions</p>

<blockquote>
  <p>!  For performance, it is highly recommended that your search requests is constrained by a collections parameter. This may be enforced in future.</p>
</blockquote>

<p><strong>Parameters:</strong></p>

<ul>
  <li>collections Matches against Item collection values (treated as OR causes)</li>
  <li>ids Matches against Item id values (treated as OR causes)</li>
  <li>datetime All dates must be in RFC 3339 format
    <ul>
      <li>Can be exact date match datetime=2023-05-14T18:50:42.000000Z</li>
      <li>Can be from-to datetime=2023-01-01T18:50:42.000000Z/2023-02-01T18:50:42.000000Z</li>
      <li>Can be from datetime=2023-01-01T18:50:42.000000Z..</li>
      <li>Can be to datetime=..2023-01-01T18:50:42.000000Z</li>
    </ul>
  </li>
  <li>bbox Matches against intersecting Item bbox values</li>
  <li>intersects (GeoJSON) Matches against intersecting Item geometry values (supported on POST method only)</li>
  <li>limit number of records to be returned</li>
</ul>

<h3 id="basic-search-via-get-method"><strong>Basic Search via GET Method</strong></h3>

<p>Shows use of datetime, collections and bbox</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://api.earthdaily.com/platform/v1/stac/search?datetime=2023-01-01T18:50:42.000000Z/2023-02-01T18:50:42.000000Z&amp;bbox=-1.757813,51.971346,-0.065918,52.589701&amp;collections=sentinel-2-l1c,sentinel-2-l2a
</code></pre></div></div>
<h3 id="basic-search-via-post-method"><strong>Basic Search via POST Method</strong></h3>

<p>Shows use of datetime, collections and intersects, query remains same as GET</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://api.eds.earthdaily.com/archive/v1/stac/search?datetime=2023-01-01T18:50:42.000000Z/2023-02-01T18:50:42.000000Z&amp;bbox=-1.757813,51.971346,-0.065918,52.589701&amp;collections=sentinel-2-l1c,sentinel-2-l2a
</code></pre></div></div>
<p><strong>Example</strong> : <a href="/API/APIUsage/CommandLine/#search">Command Line</a> | <a href="/API/APIUsage/Postman/#search">Postman</a> | <a href="/API/APIUsage/Python/#search">Python</a></p>

<h3 id="query-extension-via-post-method"><strong><a href="https://github.com/stac-api-extensions/query">Query Extension</a> via POST Method</strong></h3>

<blockquote>
  <p>EarthPlatform STAC API supports the <a href="https://github.com/stac-api-extensions/query">Query Extension</a>. It currently does not support the Filter Extension.</p>
</blockquote>

<p>Advanced searching can be performed using a <code class="language-plaintext highlighter-rouge">query</code> object. This allows searching over supported properties on STAC items using various operators.</p>

<p>When searching across 1 or more Collections, and a field is specified which is not supported, no items will be returned for that Collection.</p>

<p>To discover which fields are queryable on each Collection, see Queryables.</p>

<p>Query Extension syntax:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"&lt;QUERYABLE_PROPERTY_1&gt;"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"OPERATOR_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VALUE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"OPERATOR_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VALUE"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"&lt;QUERYABLE_PROPERTY_2&gt;"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"OPERATOR"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VALUE"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Query Extension example:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"view:sun_elevation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"gt"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lt"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"eo:cloud_cover"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"lt"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Each property and each operation is treated as an <code class="language-plaintext highlighter-rouge">AND</code> cause</p>

<p>So the above would result in a query of</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>view:sun_elevation &gt; 40 AND view:sun_elevation &lt; 60 AND eo:cloud_cover &lt; 10
</code></pre></div></div>
<p><strong>Example</strong> : <a href="/API/APIUsage/CommandLine/#query-extension-via-post-method">Command Line</a> | <a href="/API/APIUsage/Postman/#query-extension-via-post-method">Postman</a> | | <a href="/API/APIUsage/Python/#search">Python</a></p>

<h3 id="fields-extension"><a href="https://github.com/stac-api-extensions/fields">Fields Extension</a></h3>
<p>The Fields Extension allows you to specify which fields are returned from the API, reducing data transfer size.</p>

<blockquote>
  <p>Use of Fields Extension allows returning items in a potentially non-STAC compliant format. This can cause exceptions in PySTAC Client.</p>
</blockquote>

<p><strong>Usage Examples</strong></p>

<ol>
  <li>
    <p>Specifying fields to <code class="language-plaintext highlighter-rouge">include</code></p>

    <p>Retrieve only the <code class="language-plaintext highlighter-rouge">id</code>, <code class="language-plaintext highlighter-rouge">properties.datetime</code>, and <code class="language-plaintext highlighter-rouge">assets.aot</code> fields from the search endpoint:</p>
  </li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://api.earthdaily.com/platform/v1/stac/search?fields=id,properties.datetime,assets.aot
</code></pre></div></div>

<ol>
  <li>
    <p>Specifying fields to <code class="language-plaintext highlighter-rouge">exclude</code></p>

    <p>Request data while excluding the <code class="language-plaintext highlighter-rouge">links</code> and <code class="language-plaintext highlighter-rouge">geometry</code> fields from the search endpoint:</p>
  </li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://api.earthdaily.com/platform/v1/stac/search?fields=-links,-geometry
</code></pre></div></div>
<p><strong>Example</strong> : <a href="/API/APIUsage/CommandLine/#fields-extension">Command Line</a> | <a href="/API/APIUsage/Postman/#fields-extension">Postman</a> | <a href="/API/APIUsage/Python/#search">Python</a></p>

<h3 id="sortby-extension"><a href="https://github.com/stac-api-extensions/sort">Sortby Extension</a></h3>
<p>By default, Items are returned by <code class="language-plaintext highlighter-rouge">datetime</code> descending. Then by <code class="language-plaintext highlighter-rouge">id</code> ascending.</p>

<p>Sorting by property <code class="language-plaintext highlighter-rouge">eo:cloud_cover</code> is also supported on the <code class="language-plaintext highlighter-rouge">/search</code> endpoint:</p>

<blockquote>
  <p>Note: When sorting by <code class="language-plaintext highlighter-rouge">eo:cloud_cover</code>, only items with non-null <code class="language-plaintext highlighter-rouge">eo:cloud_cover</code> property values will be returned.</p>
</blockquote>

<p>GET examples:</p>

<p>Sortby <code class="language-plaintext highlighter-rouge">eo:cloud_cover</code> ascending:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://api.earthdaily.com/platform/v1/stac/search?sortby=eo:cloud_cover
</code></pre></div></div>
<p>Sortby <code class="language-plaintext highlighter-rouge">eo:cloud_cover</code> descending:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET https://api.earthdaily.com/platform/v1/stac/search?sortby=-eo:cloud_cover
</code></pre></div></div>
<p><strong>Example</strong> : <a href="/API/APIUsage/CommandLine/#sortby-extension">Command Line</a> | <a href="/API/APIUsage/Postman/#sortby-extension">Postman</a> | <a href="/API/APIUsage/Python/#search">Python</a></p>

<h2 id="downloading-assets">Downloading Assets</h2>
<p>STAC <code class="language-plaintext highlighter-rouge">assets</code> property provides <code class="language-plaintext highlighter-rouge">href</code>s that point to the files hosted on different platforms, depending on the data provider.
Currently, these URLs may use either <code class="language-plaintext highlighter-rouge">https://</code> or <code class="language-plaintext highlighter-rouge">s3://</code> protocols.</p>

<ul>
  <li>We are transitioning to a more consistent <code class="language-plaintext highlighter-rouge">href</code> format that predominantly uses <code class="language-plaintext highlighter-rouge">s3://</code>.</li>
</ul>

<p><strong>Accessing Alternate URLs</strong></p>

<p>For assets hosted on <code class="language-plaintext highlighter-rouge">S3</code> but accessible via <code class="language-plaintext highlighter-rouge">HTTP</code>, you can find an <code class="language-plaintext highlighter-rouge">HTTPS</code> version listed as an <a href="https://github.com/stac-extensions/alternate-assets">alternate asset</a> with the key <code class="language-plaintext highlighter-rouge">download_url</code>.</p>

<p>For private and requester-pays S3 assets, and Azure Blob assets, we offer presigned URLs, which ensure secure and temporary access:</p>

<blockquote>
  <p><strong>Default Behavior</strong>: Presigned URLs are automatically included for single item requests (<code class="language-plaintext highlighter-rouge">/items/{item_id}</code>) but not for searches (<code class="language-plaintext highlighter-rouge">/search</code> or <code class="language-plaintext highlighter-rouge">/items</code>) due to performance considerations.
<strong>Customization</strong>: You can request presigned URLs in search responses by using the <code class="language-plaintext highlighter-rouge">X-Signed-Asset-Urls</code> header set to <code class="language-plaintext highlighter-rouge">true</code>. Note that using a high <code class="language-plaintext highlighter-rouge">limit</code> parameter during search queries along with a large number of assets might increase response times significantly.</p>
</blockquote>

<p><strong>Usage Notes</strong></p>

<p>Presigned URLs are available for all assets in EDA buckets across all customer accounts. For third-party buckets, such as <code class="language-plaintext highlighter-rouge">s3://sentinel-s2-l1c</code>, the availability of presigned URLs depends on specific account setups. These URLs are valid for 12 hours, after which they expire.</p>

<p>Please ensure to manage the generation of presigned URLs carefully to optimize performance and avoid excessive latency in your application.</p>

<!-- space for examples -->
<p><strong>Example</strong> : <a href="/API/APIUsage/CommandLine/#downloading-assets">Command Line</a> | <a href="/API/APIUsage/Postman/#downloading-assets">Postman</a></p>

<h2 id="cloud-mask-query">Cloud Mask Query</h2>

<p>You can use the POST method to retrieve EarthDaily cloud masks as well.</p>

<!-- space for examples -->
<p><strong>Example</strong> : <a href="/API/APIUsage/CommandLine/#cloud-masks">Command Line</a> | <a href="/API/APIUsage/Postman/#cloudmasks">Postman</a> | <a href="/API/APIUsage/Python/#cloud-masks">Python</a></p>
